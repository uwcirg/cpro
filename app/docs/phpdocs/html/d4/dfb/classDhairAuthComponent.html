<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>DHAIR2: DhairAuthComponent Class Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
<link href="../../tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="../../index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="../../annotated.html"><span>Classes</span></a></li>
    <li>
      <form action="../../search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="../../annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="../../hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="../../functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>DhairAuthComponent Class Reference</h1><!-- doxytag: class="DhairAuthComponent" -->
<p>
<a href="../../df/d34/classDhairAuthComponent-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dfb/classDhairAuthComponent.html#c066121476278c76a72142b30a5fd374">initialize</a> (Controller $controller)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dfb/classDhairAuthComponent.html#15bbb05f67f105247b368f321dec8620">checkForRole</a> ($userID, $roleName)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dfb/classDhairAuthComponent.html#a7bf665cfa34f84c3b6cf135ba66bf40">badId</a> ($vars)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dfb/classDhairAuthComponent.html#3a73fbe34aae8ef12804e72d5f977394">possibleXsrf</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dfb/classDhairAuthComponent.html#fdd21f4dc101a821414f51268036ec36">isAuthorizedForUrl</a> ($controller, $action)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="bdb4a3de6de0a48d8616513b047ae031"></a><!-- doxytag: member="DhairAuthComponent::requestIsForAllowableAction" ref="bdb4a3de6de0a48d8616513b047ae031" args="()" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>requestIsForAllowableAction</b> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dfb/classDhairAuthComponent.html#4d78b0595c02b521b51d23f520649739">_checkDbForAuthzAndStoreInSession</a> ($controller, $action)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dfb/classDhairAuthComponent.html#3610c94ddf8aa0e69ee0f71e12650c70">_aclCheckForArosThatUserBelongsTo</a> ($userID, $acoAliasToCheck, $crudType)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dfb/classDhairAuthComponent.html#6c538ce65207645026f57955f7475318">getCRUDableSubAcos</a> ($acoBaseName, $crudType, $includeThisAlias=false)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dfb/classDhairAuthComponent.html#b062fe9ea7f938b6b409751e487086ce">getUsersInAcoUsers</a> ($acoUsersGroupAlias, $wholeAcoBranch=true, $sameSite=true, $sameClinic=true)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dfb/classDhairAuthComponent.html#3a136bcc401c782fecb603578424dce0">siteOkay</a> ($sameSite, $user1, $user2)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dfb/classDhairAuthComponent.html#5c8201e10712e0a4da2f2fbb6771d968">centralSupport</a> ($id=null)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dfb/classDhairAuthComponent.html#19f0a15f696713a0c5242b84dbe3cea7">researchStaff</a> ($id=null)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dfb/classDhairAuthComponent.html#d1378b7c8198968b2451fd4bcfb02acd">clinicStaff</a> ($id=null)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dfb/classDhairAuthComponent.html#6f1151d547eb9e6367a78d3944a13932">validClinicId</a> ($clinicId, $authUser)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dfb/classDhairAuthComponent.html#346ed928f5fd21c275ad9f4d86d30e82">validPatientId</a> ($patientId, $authUserId)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dfb/classDhairAuthComponent.html#ec9008cc4e45055a91d65457bfd6b7c1">_getUsersDirectlyUnderAclNode</a> ($aclNodeParentAlias, $sameSite=true, $sameClinic=true)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dfb/classDhairAuthComponent.html#f2bc6c39e7e0bc65d54774da4406afde">checkWhetherUserBelongsToAro</a> ($userID, $aroParentAlias)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dfb/classDhairAuthComponent.html#fbb45e335fd3e076d510a36cdf86ae41">_buildDhairAclTrees</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dfb/classDhairAuthComponent.html#f6c0d82008a979af81e91efa567dbc66">_buildDhairAroTree</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dfb/classDhairAuthComponent.html#e2422fad1552c044b495a082adb95715">_buildAcoTreeForControllers</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dfb/classDhairAuthComponent.html#7d0653da43ac5a53e4d899bb3fe07df5">_buildAcoTreeForCrossUserEdits</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dfb/classDhairAuthComponent.html#867aacc76d78cf150ac894f2424511db">_assignAclPermissionsForControllers</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dfb/classDhairAuthComponent.html#be051e1628dde766fb8af9d8a685ce47">_assignAclPermissionsForCrossUserEdits</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dfb/classDhairAuthComponent.html#501f026071d20506d8302aab65fe5dd8">_addAro</a> ($alias, $model=null, $parentAliasPath=null, $foreignKey=null)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dfb/classDhairAuthComponent.html#82a7d2059e54d938c23b054e766bb98a">_addAco</a> ($alias, $model=null, $parentAliasPath=null, $foreignKey=null)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dfb/classDhairAuthComponent.html#473476eb2dddbf9fe2f5646b48499d09">_addUserAclLeaf</a> ($userId, $parentAlias)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dfb/classDhairAuthComponent.html#f84582b7058999e36023cfc946006469">_addUserAclLeafsForInitUsers</a> ()</td></tr>

<tr><td colspan="2"><br><h2>Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><b>$components</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="d35d5640f39fc81cf88198f4909cede4"></a><!-- doxytag: member="DhairAuthComponent::$uses" ref="d35d5640f39fc81cf88198f4909cede4" args="" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>$uses</b> = array('<a class="el" href="../../db/d30/classUserAclLeaf.html">UserAclLeaf</a>', '<a class="el" href="../../d9/dc0/classUser.html">User</a>', 'Inflector', 'String')</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="69b0fb5cd4e846f19456b5e19a093aaa"></a><!-- doxytag: member="DhairAuthComponent::$userAclLeafs" ref="69b0fb5cd4e846f19456b5e19a093aaa" args="" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>$userAclLeafs</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="6dc1fc26470db36a73e637bdd458c6ab"></a><!-- doxytag: member="DhairAuthComponent::$userAclLeafInstance" ref="6dc1fc26470db36a73e637bdd458c6ab" args="" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>$userAclLeafInstance</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="4f286c9d15d71d8b7ad662254a97ca55"></a><!-- doxytag: member="DhairAuthComponent::$inflectorInstance" ref="4f286c9d15d71d8b7ad662254a97ca55" args="" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>$inflectorInstance</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><b>$allowedActions</b></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Handles much of the authorization, and some authentication for DHAIR<p>
Copyright 2013 University of Washington, School of Nursing. <a href="http://opensource.org/licenses/BSD-3-Clause">http://opensource.org/licenses/BSD-3-Clause</a><p>
Authentication answers: who is the user? are they who they say they are? Authorization: are they allowed to view their request?<p>
Steps in the process of a normal request:<p>
1. Authenticate username and password This is handled automatically by the CakePHP Auth lib<p>
2. If the requesting controller/action has been passed to Auth-&gt;allow, it will not undergo further authorization checks<p>
3. For calls which requires authorization (i.e. any that has not been passed to Auth-&gt;allow in its controller) Since we set Auth's authorize method to 'controller' here, authorization is determined by $controller-&gt;isAuthorized(). Our customization of this fxn is in app_controller<p>
4. isAuthorizedForUrl (defined here) Determines whether the current user is authorized to access a url Checks the ACL trees for permissions <a class="el" href="../../dc/d2c/classNote.html">Note</a> that this is also used when determining which nav elements &amp; links should be added to the page<p>
About DHAIR's ACL Authorization ACL trees are used to define role and resource heirarchies ARO tree (defines roles): There is one ARO tree, which defines the role heirarchy Membership in a child ARO means membership in its parent(s) also ACO trees (define resources): Access to a parent ACO also grants access to its children There are two ACO trees: 1. Controllers ACO tree (under "Controllers" ACO node) Heirarchy of controllers and actions AROS are typically granted permissions on a per action basis <a class="el" href="../../dc/d2c/classNote.html">Note</a>: we're not using ACL's ability to distinguish CRUD types 2. Cross-user ACO tree (under "acoUsers" ACO node) This should only be applied within an action, and should probably be limited to cross-staff edits if used at all (e.g. determining which staff acos are editable by the current user - see crudableUserAcos in Admin controller <a class="el" href="../../d9/dc0/classUser.html">User</a> Membership in the ACL trees is defined in the UserAclLeafs model If a user has an acl* alias record, he is a member of aro* and aco*. e.g. if a user has a record w/ acl_alias = aclPatient, that user belongs to aroPatient and acoPatient Users can be assigned multiple ACL aliases This model and its fxnality are our own construction. To initialize empty acl tables, use the "buildAclTrees" function <a class="el" href="../../dc/d2c/classNote.html">Note</a>: while clinic-specificity is not defined in the ACL trees, it is applied in this component. Viewing/modding the trees using the <a class="el" href="../../d4/dca/namespacecake.html">cake</a> console Examples (run app/Console/cake) <a class="el" href="../../d4/dca/namespacecake.html">cake</a> acl view aro (or aco) (displays all trees) <a class="el" href="../../d4/dca/namespacecake.html">cake</a> acl create aco (or aro) aliasParent aliasChild e.g. <a class="el" href="../../d4/dca/namespacecake.html">cake</a> acl create aco Controllers/Surveys summary <a class="el" href="../../d4/dca/namespacecake.html">cake</a> acl delete aco Controllers/Junk <a class="el" href="../../d4/dca/namespacecake.html">cake</a> acl grant aroParticipantTreatment Controllers/Journals/index all <a class="el" href="../../d4/dca/namespacecake.html">cake</a> acl grant aroAliasX acoAliasY read <a class="el" href="../../d4/dca/namespacecake.html">cake</a> acl check aroAdmin Controllers/Surveys/summary read <hr><h2>Member Function Documentation</h2>
<a class="anchor" name="c066121476278c76a72142b30a5fd374"></a><!-- doxytag: member="DhairAuthComponent::initialize" ref="c066121476278c76a72142b30a5fd374" args="(Controller $controller)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DhairAuthComponent::initialize           </td>
          <td>(</td>
          <td class="paramtype">Controller $&nbsp;</td>
          <td class="paramname"> <em>controller</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
$this-&gt;log("DhairAuth initialize(); controller name:" . $this-&gt;controller-&gt;name . "; action name: " . $this-&gt;controller-&gt;action . "; trace:" . Debugger::trace(), LOG_DEBUG);<p>
$this-&gt;crudableUserAcos['read'] = $this-&gt;getCRUDableSubAcos('acoUsers', 'read'); $this-&gt;crudableUserAcos['create'] = $this-&gt;getCRUDableSubAcos('acoUsers', 'create'); 
</div>
</div><p>
<a class="anchor" name="15bbb05f67f105247b368f321dec8620"></a><!-- doxytag: member="DhairAuthComponent::checkForRole" ref="15bbb05f67f105247b368f321dec8620" args="($userID, $roleName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DhairAuthComponent::checkForRole           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>userID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>roleName</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
function startup(Controller $controller) { } Checks whether a user belongs to or inherits a role <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$roleName</em>&nbsp;</td><td>The name of the role ('aro' prefix can be included but need not be) e.g. 'aroCentralSupport'; 'CentralSupport' </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>boolean </dd></dl>

</div>
</div><p>
<a class="anchor" name="a7bf665cfa34f84c3b6cf135ba66bf40"></a><!-- doxytag: member="DhairAuthComponent::badId" ref="a7bf665cfa34f84c3b6cf135ba66bf40" args="($vars)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DhairAuthComponent::badId           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>vars</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Was a bad id field passed into form (and similar) requests? <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>vars</em>&nbsp;</td><td>Array of vars that should contain the id </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>true if the id field was not present or doesn't match; false if it was present and matches </dd></dl>

</div>
</div><p>
<a class="anchor" name="3a73fbe34aae8ef12804e72d5f977394"></a><!-- doxytag: member="DhairAuthComponent::possibleXsrf" ref="3a73fbe34aae8ef12804e72d5f977394" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DhairAuthComponent::possibleXsrf           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Does the request look like a potential cross-site request forgery? <dl class="return" compact><dt><b>Returns:</b></dt><dd>Whether the request looks like a cross-site request forgery </dd></dl>

<p>
$this-&gt;log(__CLASS__ . "." . __FUNCTION__ . "() for " . $this-&gt;controller-&gt;params['controller'] . '.' . $this-&gt;controller-&gt;params['action'] . "; special block,  stack: " . Debugger::trace(), LOG_DEBUG); if (!empty($this-&gt;controller-&gt;params) &amp;&amp; !empty($this-&gt;controller-&gt;params['url'])) { $this-&gt;log(__CLASS__ . "." . __FUNCTION__ . "() for " . $this-&gt;controller-&gt;params['controller'] . '.' . $this-&gt;controller-&gt;params['action'] . ", ; special block, ! empty params[url], will check badId on that next", LOG_DEBUG); $returnVal = $this-&gt;badId($this-&gt;controller-&gt;params['url']); } 
</div>
</div><p>
<a class="anchor" name="fdd21f4dc101a821414f51268036ec36"></a><!-- doxytag: member="DhairAuthComponent::isAuthorizedForUrl" ref="fdd21f4dc101a821414f51268036ec36" args="($controller, $action)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DhairAuthComponent::isAuthorizedForUrl           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>controller</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>action</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
isAuthorizedForUrl(String $url) -&gt; Boolean $url should be a cakephp url, relative to the clinic's location, not an absolute url or filepath.<p>
checks both ACL and custom business rules to see if current session's user may access the given url. This is the single authoritative answer to the question "can he see this?" The methods it calls should not be called directly except in extreme cases If the url isn't defined in the aco tree, it won't be accessible 
<p>
If the action is in the allowedActions array, return true. <a class="el" href="../../dc/d2c/classNote.html">Note</a> that Auth won't call isAuthorized to check these actions, but we still need to weed them out here because this fxn is used to determine whether to display links to actions 
</div>
</div><p>
<a class="anchor" name="4d78b0595c02b521b51d23f520649739"></a><!-- doxytag: member="DhairAuthComponent::_checkDbForAuthzAndStoreInSession" ref="4d78b0595c02b521b51d23f520649739" args="($controller, $action)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DhairAuthComponent::_checkDbForAuthzAndStoreInSession           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>controller</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>action</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
No need to call this if the controller &amp; action have already been looked up, because it will be stored in the session var 
</div>
</div><p>
<a class="anchor" name="3610c94ddf8aa0e69ee0f71e12650c70"></a><!-- doxytag: member="DhairAuthComponent::_aclCheckForArosThatUserBelongsTo" ref="3610c94ddf8aa0e69ee0f71e12650c70" args="($userID, $acoAliasToCheck, $crudType)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DhairAuthComponent::_aclCheckForArosThatUserBelongsTo           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>userID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>acoAliasToCheck</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>crudType</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Using user_acl_leafs table 
<p>
$this-&gt;log(__CLASS__ . "." . __FUNCTION__ . "() " . "userID: " . $userID . "; " . "acoAliasToCheck: " . $acoAliasToCheck . "; " . "crudType: " . $crudType. "; \n" . Debugger::trace(), LOG_DEBUG); 
</div>
</div><p>
<a class="anchor" name="6c538ce65207645026f57955f7475318"></a><!-- doxytag: member="DhairAuthComponent::getCRUDableSubAcos" ref="6c538ce65207645026f57955f7475318" args="($acoBaseName, $crudType, $includeThisAlias=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DhairAuthComponent::getCRUDableSubAcos           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>acoBaseName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>crudType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>includeThisAlias</em> = <code>false</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Given an aco alias, retrieve an array of sub-acos which the currently authenticated user has permission to perform some crud operation on This is only used by the cross-user ACO tree (not currently used)<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$acoBaseName</em>&nbsp;</td><td>- alias of the aco to look under (e.g. 'acoUsers') </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$crudType</em>&nbsp;</td><td>- 'create', 'read', 'update', 'delete', '*' </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="b062fe9ea7f938b6b409751e487086ce"></a><!-- doxytag: member="DhairAuthComponent::getUsersInAcoUsers" ref="b062fe9ea7f938b6b409751e487086ce" args="($acoUsersGroupAlias, $wholeAcoBranch=true, $sameSite=true, $sameClinic=true)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DhairAuthComponent::getUsersInAcoUsers           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>acoUsersGroupAlias</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>wholeAcoBranch</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>sameSite</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>sameClinic</em> = <code>true</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Given the alias of a cross-User group aco ("acoUsers*"), return an approprate array of the user records which are acting as aco* (acl* as specified in user_acl_leafs.acl_alias)<p>
'Appropriate' here refers to all users, users in the same site as the authenticated user, or users in the same clinic as the authenticated user.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$acoUsersGroup</em>&nbsp;</td><td>the alias of a user aco; must be "acoUsers*" e.g. "acoUsersResearchStaff" </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$wholeAcoBranch</em>&nbsp;</td><td>include Users in entire Aco branch (a la standard aco behavior) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$sameSite</em>&nbsp;</td><td>Only return users in the same site </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$sameClinic</em>&nbsp;</td><td>Only return users in the same clinic </td></tr>
  </table>
</dl>

<p>
ob_start(); var_dump($arrayOfUsersToReturn); $debugStr = ob_get_contents(); ob_end_clean(); $this-&gt;log("for acoUsersGroupAlias param: " . $acoUsersGroupAlias . ", direct users = " . $debugStr . "; " . Debugger::trace(), LOG_DEBUG); 
</div>
</div><p>
<a class="anchor" name="3a136bcc401c782fecb603578424dce0"></a><!-- doxytag: member="DhairAuthComponent::siteOkay" ref="3a136bcc401c782fecb603578424dce0" args="($sameSite, $user1, $user2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DhairAuthComponent::siteOkay           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>sameSite</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>user1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>user2</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Check whether a pair of users passes the site test <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sameSite</em>&nbsp;</td><td>Whether the two users have to be from the same site </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>user1</em>&nbsp;</td><td>first user </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>user2</em>&nbsp;</td><td>second user </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>true if the two users have the same site_id, or sameSite is false </dd></dl>

</div>
</div><p>
<a class="anchor" name="5c8201e10712e0a4da2f2fbb6771d968"></a><!-- doxytag: member="DhairAuthComponent::centralSupport" ref="5c8201e10712e0a4da2f2fbb6771d968" args="($id=null)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DhairAuthComponent::centralSupport           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>id</em> = <code>null</code>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Is a given userid an admin user? <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>id</em>&nbsp;</td><td>Id to check </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>does the id belong to an admin user? </dd></dl>

</div>
</div><p>
<a class="anchor" name="19f0a15f696713a0c5242b84dbe3cea7"></a><!-- doxytag: member="DhairAuthComponent::researchStaff" ref="19f0a15f696713a0c5242b84dbe3cea7" args="($id=null)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DhairAuthComponent::researchStaff           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>id</em> = <code>null</code>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Is a given userid research staff? <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>id</em>&nbsp;</td><td>Id to check </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>does the id belong to research staff? </dd></dl>

</div>
</div><p>
<a class="anchor" name="d1378b7c8198968b2451fd4bcfb02acd"></a><!-- doxytag: member="DhairAuthComponent::clinicStaff" ref="d1378b7c8198968b2451fd4bcfb02acd" args="($id=null)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DhairAuthComponent::clinicStaff           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>id</em> = <code>null</code>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Is a given userid clinic staff? <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>id</em>&nbsp;</td><td>Id to check </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>does the id belong to research staff? </dd></dl>

</div>
</div><p>
<a class="anchor" name="6f1151d547eb9e6367a78d3944a13932"></a><!-- doxytag: member="DhairAuthComponent::validClinicId" ref="6f1151d547eb9e6367a78d3944a13932" args="($clinicId, $authUser)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DhairAuthComponent::validClinicId           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>clinicId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>authUser</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Check whether a clinic id value is valid for the authenticated user <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>clinicId</em>&nbsp;</td><td><a class="el" href="../../de/de5/classClinic.html">Clinic</a> id for the user </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>authUser</em>&nbsp;</td><td>Authenticated user </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="346ed928f5fd21c275ad9f4d86d30e82"></a><!-- doxytag: member="DhairAuthComponent::validPatientId" ref="346ed928f5fd21c275ad9f4d86d30e82" args="($patientId, $authUserId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DhairAuthComponent::validPatientId           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>patientId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>authUserId</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Check whether a patient is valid for the authenticated user <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>patientId</em>&nbsp;</td><td>Id of the patient </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>authUserId</em>&nbsp;</td><td>Id of the authenticated user </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="ec9008cc4e45055a91d65457bfd6b7c1"></a><!-- doxytag: member="DhairAuthComponent::_getUsersDirectlyUnderAclNode" ref="ec9008cc4e45055a91d65457bfd6b7c1" args="($aclNodeParentAlias, $sameSite=true, $sameClinic=true)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DhairAuthComponent::_getUsersDirectlyUnderAclNode           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>aclNodeParentAlias</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>sameSite</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>sameClinic</em> = <code>true</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Given an acl node alias (e.g. aclResearchStaff), read the user_acl_leafs table to determine that acl node's direct children, and return a clinic-limited, site-limited, or all-clinic array of the user records for those children<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$aclNodeParentAlias</em>&nbsp;</td><td>acl alias to look under </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$sameSite</em>&nbsp;</td><td>whether to limit returned records to those with the same site as the authorized user (true by default) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$sameClinic</em>&nbsp;</td><td>whether to limit returned records to those with the same clinic as the authorized user (true by default) </td></tr>
  </table>
</dl>

<p>
ob_start(); var_dump($users); $debugStr = ob_get_contents(); ob_end_clean(); $this-&gt;log("for aclNodeParentAlias param: " . $aclNodeParentAlias . ", direct users = " . $debugStr . "; " . Debugger::trace(), LOG_DEBUG); 
</div>
</div><p>
<a class="anchor" name="f2bc6c39e7e0bc65d54774da4406afde"></a><!-- doxytag: member="DhairAuthComponent::checkWhetherUserBelongsToAro" ref="f2bc6c39e7e0bc65d54774da4406afde" args="($userID, $aroParentAlias)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DhairAuthComponent::checkWhetherUserBelongsToAro           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>userID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>aroParentAlias</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Search <a class="el" href="../../db/d30/classUserAclLeaf.html">UserAclLeaf</a> for all records matching $userID for each <a class="el" href="../../db/d30/classUserAclLeaf.html">UserAclLeaf</a> if it's alias matches $aroParentAlias return true else check all the aro's children for the same 
</div>
</div><p>
<a class="anchor" name="fbb45e335fd3e076d510a36cdf86ae41"></a><!-- doxytag: member="DhairAuthComponent::_buildDhairAclTrees" ref="fbb45e335fd3e076d510a36cdf86ae41" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DhairAuthComponent::_buildDhairAclTrees           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Used to initialize the aros, acos, and aros_acos tables. If used to re-populate these tables, the tables should be emptied first. One way to run this would be to temporarily insert it into a page which isAuthorized is not called for (e.g. users/login) 
</div>
</div><p>
<a class="anchor" name="f6c0d82008a979af81e91efa567dbc66"></a><!-- doxytag: member="DhairAuthComponent::_buildDhairAroTree" ref="f6c0d82008a979af81e91efa567dbc66" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DhairAuthComponent::_buildDhairAroTree           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create the Aro tree for DHAIR roles. <dl class="author" compact><dt><b>Author:</b></dt><dd>Justin McReynolds </dd></dl>
<dl class="version" compact><dt><b>Version:</b></dt><dd>0.1 </dd></dl>

</div>
</div><p>
<a class="anchor" name="e2422fad1552c044b495a082adb95715"></a><!-- doxytag: member="DhairAuthComponent::_buildAcoTreeForControllers" ref="e2422fad1552c044b495a082adb95715" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DhairAuthComponent::_buildAcoTreeForControllers           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create the Aco tree for DHAIR controllers. <dl class="author" compact><dt><b>Author:</b></dt><dd>Justin McReynolds </dd></dl>
<dl class="version" compact><dt><b>Version:</b></dt><dd>0.1 </dd></dl>

</div>
</div><p>
<a class="anchor" name="7d0653da43ac5a53e4d899bb3fe07df5"></a><!-- doxytag: member="DhairAuthComponent::_buildAcoTreeForCrossUserEdits" ref="7d0653da43ac5a53e4d899bb3fe07df5" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DhairAuthComponent::_buildAcoTreeForCrossUserEdits           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create the Aco tree for cross-user CRUD. <dl class="author" compact><dt><b>Author:</b></dt><dd>Justin McReynolds </dd></dl>
<dl class="version" compact><dt><b>Version:</b></dt><dd>0.1 </dd></dl>

</div>
</div><p>
<a class="anchor" name="867aacc76d78cf150ac894f2424511db"></a><!-- doxytag: member="DhairAuthComponent::_assignAclPermissionsForControllers" ref="867aacc76d78cf150ac894f2424511db" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DhairAuthComponent::_assignAclPermissionsForControllers           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Grant acl permissions to aros for access to controllers &amp; actions acos <dl class="author" compact><dt><b>Author:</b></dt><dd>Justin McReynolds </dd></dl>
<dl class="version" compact><dt><b>Version:</b></dt><dd>0.1 </dd></dl>

<p>
$this-&gt;Acl-&gt;allow('aroClinicStaff', 'Controllers/Patients/index'); $this-&gt;Acl-&gt;allow('aroClinicStaff', 'Controllers/Patients/add'); $this-&gt;Acl-&gt;allow('aroClinicStaff', 'Controllers/Patients/view'); $this-&gt;Acl-&gt;allow('aroClinicStaff', 'Controllers/Patients/viewAll'); $this-&gt;Acl-&gt;allow('aroClinicStaff', 'Controllers/Patients/resetPassword'); $this-&gt;Acl-&gt;allow('aroClinicStaff', 'Controllers/Patients/changeUsername'); $this-&gt;Acl-&gt;allow('aroClinicStaff', 'Controllers/Patients/calendar');<p>
$this-&gt;Acl-&gt;allow('aroResearchStaff', 'Controllers/Patients');<p>
$this-&gt;Acl-&gt;allow('aroResearchStaff', 'Controllers/Clinicians');<p>
$this-&gt;Acl-&gt;allow('aroResearchStaff', 'Controllers/AudioFiles'); $this-&gt;Acl-&gt;deny('aroResearchStaff', 'Controllers/AudioFiles/assignCoders'); $this-&gt;Acl-&gt;allow('aroResearchStaff', 'Controllers/Charts/viewAll'); $this-&gt;Acl-&gt;allow('aroResearchStaff', 'Controllers/ChartCodings'); 
</div>
</div><p>
<a class="anchor" name="be051e1628dde766fb8af9d8a685ce47"></a><!-- doxytag: member="DhairAuthComponent::_assignAclPermissionsForCrossUserEdits" ref="be051e1628dde766fb8af9d8a685ce47" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DhairAuthComponent::_assignAclPermissionsForCrossUserEdits           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Assign acl permissions to aros for CRUD on (non self) users <dl class="author" compact><dt><b>Author:</b></dt><dd>Justin McReynolds </dd></dl>
<dl class="version" compact><dt><b>Version:</b></dt><dd>0.1 </dd></dl>

</div>
</div><p>
<a class="anchor" name="501f026071d20506d8302aab65fe5dd8"></a><!-- doxytag: member="DhairAuthComponent::_addAro" ref="501f026071d20506d8302aab65fe5dd8" args="($alias, $model=null, $parentAliasPath=null, $foreignKey=null)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DhairAuthComponent::_addAro           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>alias</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>model</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>parentAliasPath</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>foreignKey</em> = <code>null</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl class="author" compact><dt><b>Author:</b></dt><dd>Justin McReynolds </dd></dl>
<dl class="version" compact><dt><b>Version:</b></dt><dd>0.2 </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$parentAliasPath</em>&nbsp;</td><td>- If parent alias is not unique, pass the full path to parent, e.g. "Controllers/Users"; if parent alias is unique, simply pass that. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="82a7d2059e54d938c23b054e766bb98a"></a><!-- doxytag: member="DhairAuthComponent::_addAco" ref="82a7d2059e54d938c23b054e766bb98a" args="($alias, $model=null, $parentAliasPath=null, $foreignKey=null)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DhairAuthComponent::_addAco           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>alias</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>model</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>parentAliasPath</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>foreignKey</em> = <code>null</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl class="author" compact><dt><b>Author:</b></dt><dd>Justin McReynolds </dd></dl>
<dl class="version" compact><dt><b>Version:</b></dt><dd>0.2 </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$parentAliasPath</em>&nbsp;</td><td>- If parent alias is not unique, pass the full path to parent, e.g. "Controllers/Users"; if parent alias is unique, simply pass that. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="473476eb2dddbf9fe2f5646b48499d09"></a><!-- doxytag: member="DhairAuthComponent::_addUserAclLeaf" ref="473476eb2dddbf9fe2f5646b48499d09" args="($userId, $parentAlias)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DhairAuthComponent::_addUserAclLeaf           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>userId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>parentAlias</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
TODO: call directly <dl class="author" compact><dt><b>Author:</b></dt><dd>Justin McReynolds </dd></dl>
<dl class="version" compact><dt><b>Version:</b></dt><dd>0.1 </dd></dl>

</div>
</div><p>
<a class="anchor" name="f84582b7058999e36023cfc946006469"></a><!-- doxytag: member="DhairAuthComponent::_addUserAclLeafsForInitUsers" ref="f84582b7058999e36023cfc946006469" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DhairAuthComponent::_addUserAclLeafsForInitUsers           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Add some user acl memberships for users for app init. <dl class="author" compact><dt><b>Author:</b></dt><dd>Justin McReynolds </dd></dl>
<dl class="version" compact><dt><b>Version:</b></dt><dd>0.1 </dd></dl>

</div>
</div><p>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="00f896720962085efe3c57ce4b24325a"></a><!-- doxytag: member="DhairAuthComponent::$components" ref="00f896720962085efe3c57ce4b24325a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DhairAuthComponent::$components          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Initial value:</b><div class="fragment"><pre class="fragment"> array(<span class="stringliteral">'Auth'</span>, <span class="stringliteral">'Acl'</span>, <span class="stringliteral">'DhairLogging'</span>, <span class="stringliteral">'RequestHandler'</span>,
                            <span class="stringliteral">'Session'</span>)
</pre></div>
</div>
</div><p>
<a class="anchor" name="187bd4cbdf4bde9e21273e3372b6d689"></a><!-- doxytag: member="DhairAuthComponent::$allowedActions" ref="187bd4cbdf4bde9e21273e3372b6d689" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DhairAuthComponent::$allowedActions          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Initial value:</b><div class="fragment"><pre class="fragment"> array(
            <span class="stringliteral">'Clinicians'</span> =&gt; array(<span class="stringliteral">'survey'</span>),
            <span class="stringliteral">'Users'</span> =&gt; array(
                <span class="stringliteral">'about'</span>,
                <span class="stringliteral">'contact'</span>,
                <span class="stringliteral">'logout'</span>,
                <span class="stringliteral">'help'</span>,
                <span class="stringliteral">'edit'</span>, <span class="comment">// FIXME remove</span>
                <span class="comment">//'selfRegister',</span>
                <span class="comment">// 'registerEdit',</span>
                <span class="stringliteral">'identify'</span>,
                <span class="stringliteral">'setLanguageForSelf'</span>,
                <span class="stringliteral">'login_assist'</span>,
            ),
            <span class="stringliteral">'Patients'</span> =&gt; array(<span class="stringliteral">'optOut'</span>),
            <span class="stringliteral">'Associates'</span> =&gt; array(<span class="stringliteral">'register'</span>, <span class="stringliteral">'registerFinish'</span>))
</pre></div>
</div>
</div><p>
<hr>The documentation for this class was generated from the following file:<ul>
<li>/var/lib/jenkins/jobs/CPRO doc auto-generation - GitHub Repo/workspace/app/Controller/Component/DhairAuthComponent.php</ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Dec 23 10:49:47 2013 for DHAIR2 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
